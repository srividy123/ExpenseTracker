<form id="addExpense">
    <label for="expense">Choose Expense</label>
    <input type="number" id="expense" name="expense" required><br><br>
    <label for="description">Choose Description</label>
    <input type="text" id="description" name="description" required><br><br>
    <label for="email">Enter Email</label>
    <input type="email" id="email" name="email" required><br><br><br><br>
    <input type="submit" value="Submit">
</form>
<ul id="expenseList"></ul>

<script>
    const form=document.getElementById('addExpense');
    form.addEventListener('submit',async(e)=>{
        e.preventDefault();
        const expense=e.target.expense.value;
        const description=e.target.description.value;
        const email=e.target.email.value;

        try{
            const response=await fetch('/api/add-expense',{
                method:'POST',
                headers:{'Content-Type':'application/json'},
                body:JSON.stringify({expense,description,email})
            });
            const exp=await response.json();
            displayOnScreen(exp);
        }catch(error){
            console.log(error);
        }
    });

    async function loadExpenses(){
        try{
            const response=await fetch('/api/expenses');
            const exps=await response.json();
            exps.forEach(exp=>{
                displayOnScreen(exp);
            })
        }catch(error){
            console.log(error);
        }
    }

    function displayOnScreen(exp){
        const expList=document.getElementById('expenseList');
        const listItem=`<li>${exp.expense} - ${exp.description} - ${exp.email}
            <button onclick="deleteOrder(${exp.id})">Delete</button></li>`;
        expList.innerHTML+=listItem;
    }

    async function deleteExpense(id){
        try{
            await fetch('/api/delete-expense/${id}',{
                method:'DELETE'
            });
            location.reload();
        }catch(error){
            console.log(error);
        }
    };
    window.onload=loadExpenses;
</script>